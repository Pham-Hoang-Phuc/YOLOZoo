version: '3.8'

services:
  model_zoo_app:
    # Build image từ Dockerfile trong thư mục hiện tại
    build: 
      context: .
      dockerfile: docker/dockerfile
    # Tên của image sau khi build
    image: model_zoo
    # Thư mục làm việc bên trong container
    working_dir: /app
    volumes:
      # Mount các thư mục quan trọng từ máy host vào container
      # Giúp bạn thay đổi config, data, model mà không cần build lại
      - ./configs:/app/configs
      - ./data:/app/data
      - ./models:/app/models
      - ./runs:/app/runs
    
    # Ví dụ về cách chạy một lệnh train. Bỏ comment và chỉnh sửa nếu cần.
    # command: >
    #   python tools/train.py 
    #   --config configs/v26/v26_m_demo.yaml

    # --- Hỗ trợ GPU (yêu cầu nvidia-container-toolkit) ---
    # Bỏ comment phần dưới đây nếu bạn muốn sử dụng GPU của NVIDIA
    # deploy:
    #   resources:
    #     reservations:
    #       devices:
    #         - driver: nvidia
    #           count: 1
    #           capabilities: [gpu]
